{
	"name":"Catalogger Database Package",
	"versionString":"1.0.0",
	"version":"1",
	"versionServicePack":"0",
	"packages":{
		"create": {
			"queries":
			[
				{
					"name":"MESSAGES",
					"query":"CREATE TABLE MESSAGES(MESSAGE_ID SERIAL NOT NULL PRIMARY KEY, MESSAGE_TEXT VARCHAR(4000) DEFAULT '', MESSAGE_LEVEL INT DEFAULT '1', MESSAGE_CATEGORY INT DEFAULT '1', LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"FLAGS",
					"query":"CREATE TABLE FLAGS(FLAG_ID SERIAL NOT NULL PRIMARY KEY, FLAG_NAME VARCHAR(120) NOT NULL, FLAG_VALUE VARCHAR(255), LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"USERS",
					"query":"CREATE TABLE USERS(USER_ID SERIAL NOT NULL PRIMARY KEY, USER_USERNAME VARCHAR(120) NOT NULL, USER_PASSWORD TEXT, USER_AVATAR TEXT, USER_EMAIL VARCHAR(500) NOT NULL, USER_FIRSTNAME VARCHAR(120) NOT NULL, USER_LASTNAME VARCHAR(255) NOT NULL, USER_JSON TEXT, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_STATE INT DEFAULT '0')"
				},
				{
					"name": "USER_PERMISSIONS",
					"query": "CREATE TABLE USER_PERMISSIONS (USER_PERMISSION_ID SERIAL NOT NULL PRIMARY KEY, USER_PERMISSION_PRINCIPAL VARCHAR(300) NOT NULL, USER_PERMISSION_ACTION INT NOT NULL, USER_PERMISSION_EFFECT INT NOT NULL DEFAULT '1', USER_ID INT NOT NULL, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID))"
				},
				{
					"name":"GROUPS",
					"query":"CREATE TABLE GROUPS (GROUP_ID SERIAL NOT NULL PRIMARY KEY, GROUP_LABEL VARCHAR(120) NOT NULL, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"GROUP_MEMBERS",
					"query":"CREATE TABLE GROUP_MEMBERS (GROUP_ID INT, USER_ID INT, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (GROUP_ID, USER_ID), FOREIGN KEY (GROUP_ID) REFERENCES GROUPS(GROUP_ID), FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID))"
				},
				{
					"name":"SESSIONS",
					"query":"CREATE TABLE SESSIONS(SESSION_ID SERIAL NOT NULL PRIMARY KEY, SESSION_TOKEN VARCHAR(120) NOT NULL, USER_ID INT NOT NULL, CREATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID))"
				},
				{
					"name":"AUTHORS",
					"query": "CREATE TABLE AUTHORS(AUTHOR_ID SERIAL NOT NULL PRIMARY KEY, AUTHOR_FIRSTNAME VARCHAR(255), AUTHOR_LASTNAME VARCHAR(255), AUTHOR_BIOGRAPHY TEXT, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"MEDIA_TYPES",
					"query":"CREATE TABLE MEDIA_TYPES(MEDIA_TYPE_ID SERIAL NOT NULL PRIMARY KEY, MEDIA_TYPE_LABEL VARCHAR(120) NOT NULL, MEDIA_TYPE_ICON TEXT)"
				},
				{
					"name": "PUBLISHERS",
					"query": "CREATE TABLE PUBLISHERS(PUBLISHER_ID SERIAL NOT NULL PRIMARY KEY, PUBLISHER_NAME VARCHAR(255) NOT NULL, PUBLISHER_ADDRESS VARCHAR(500), PUBLISHER_CITY VARCHAR(300), PUBLISHER_STATE VARCHAR(120), PUBLISHER_COUNTRY VARCHAR(120), PUBLISHER_ISBN VARCHAR(20), LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name": "TITLES",
					"query": "CREATE TABLE TITLES(TITLE_ID SERIAL NOT NULL PRIMARY KEY, TITLE_NAME VARCHAR(500) NOT NULL, TITLE_STATE INT DEFAULT '1', TITLE_SERIAL VARCHAR(500), TITLE_GENRE VARCHAR(120), MEDIA_TYPE INT NOT NULL, AUTHOR_ID INT NOT NULL, PUBLISHER_ID INT NOT NULL, TITLE_SHELF VARCHAR(120) default '', TITLE_ROW VARCHAR(120) DEFAULT '', TITLE_COLUMN VARCHAR(120) DEFAULT '', TITLE_DESCRIPTION TEXT, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ID INT NOT NULL, FOREIGN KEY (MEDIA_TYPE) REFERENCES MEDIA_TYPES(MEDIA_TYPE_ID), FOREIGN KEY (AUTHOR_ID) REFERENCES AUTHORS(AUTHOR_ID), FOREIGN KEY (PUBLISHER_ID) REFERENCES PUBLISHERS(PUBLISHER_ID), FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID))"
				},
				{
					"name": "TITLE_COPY",
					"query": "CREATE TABLE TITLE_COPY(TITLE_COPY_ID SERIAL NOT NULL PRIMARY KEY, TITLE_ID INT NOT NULL, TITLE_COPY_STATE INT DEFAULT '0', LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ID INT NOT NULL, FOREIGN KEY (TITLE_ID) REFERENCES TITLES(TITLE_ID), FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID))"
				},
				{
					"name":"CUSTOMERS",
					"query": "CREATE TABLE CUSTOMERS(CUSTOMER_ID SERIAL NOT NULL PRIMARY KEY, CUSTOMER_ISBN VARCHAR(20) DEFAULT '', CUSTOMER_FIRSTNAME VARCHAR(300) NOT NULL, CUSTOMER_LASTNAME VARCHAR(500) NOT NULL, CUSTOMER_ADDRESS VARCHAR(300), CUSTOMER_CITY VARCHAR(300) NOT NULL, CUSTOMER_STATE VARCHAR(300) NOT NULL, CUSTOMER_COUNTRY VARCHAR(300) NOT NULL, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"TITLE_HISTORY",
					"query": "CREATE TABLE TITLE_HISTORY(TITLE_HISTORY_ID SERIAL NOT NULL PRIMARY KEY, TITLE_COPY_ID INT NOT NULL, TITLE_HISTORY_STATE INT NOT NULL DEFAULT '0', CUSTOMER_ID INT NOT NULL, CHECKOUT_DATE TIMESTAMP, CHECKIN_DATE TIMESTAMP, LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP, USER_ID INT NOT NULL, TITLE_HISTORY_ISLATE INT NOT NULL DEFAULT '0', TITLE_HISTORY_PAID INT DEFAULT '0', FOREIGN KEY (TITLE_COPY_ID) REFERENCES TITLE_COPY(TITLE_COPY_ID), FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID), FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID))"
				},
				{
					"name":"UPGRADE_HISTORY",
					"query":"CREATE TABLE UPGRADE_HISTORY (UPGRADE_HISTORY_VERSION VARCHAR(30), LAST_UPDATED_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP)"
				},
				{
					"name":"Add user group",
					"query":"INSERT INTO GROUPS(GROUP_LABEL) VALUES ('USERS')"
				},
				{
	            	"name":"Add admin group",
	            	"query":"INSERT INTO GROUPS(GROUP_LABEL) VALUES ('ADMINISTRATORS')"
	        	},
				{
					"name":"Set database version",
					"query":"INSERT INTO UPGRADE_HISTORY (UPGRADE_HISTORY_VERSION) VALUES ('1.0.0.0')"
				},
				{
					"name": "Add Book",
					"query": "INSERT INTO MEDIA_TYPES (MEDIA_TYPE_LABEL) VALUES ('BOOK')"
				},
				{
					"name": "Add DVD",
					"query": "INSERT INTO MEDIA_TYPES (MEDIA_TYPE_LABEL) VALUES ('DVD')"
				},
				{
					"name": "Add CD",
                  	"query": "INSERT INTO MEDIA_TYPES (MEDIA_TYPE_LABEL) VALUES ('CD')"
				},
				{
					"name": "Add Tape",
                    "query": "INSERT INTO MEDIA_TYPES (MEDIA_TYPE_LABEL) VALUES ('TAPE')"
				}
		]
	},
		"update":{
			"queries":
			[
			]
		}
	}
}

